{
"version":3,
"file":"",
"lineCount":8,
"mappings":"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",
"sources":["login.js"],
"sourcesContent":["/*\n * Made by: Saul Gonzalez \n * Copyright (c) 2019.\n */\n\nlet timeOut = 7;  //dias\n\nwindow.onload = async function() {\n    //delete_cookie( \"t\", \"/\",domainStr);\n    Swal.fire({\n        title: 'Un momento por favor ...',\n        didOpen: async () => {\n            Swal.showLoading()\n            if (!navigator.cookieEnabled){\n                document.getElementById('divcookie').style = \"display:inline;\";\n                document.getElementById('divlogin').style = \"display:none;\";\n            }\n            const cookey = await getCookie(\"k\");\n            const cootok = await getCookie(\"t\");\n            if ((cookey === \"\") || (cookey === null)) {\n                const key = await getKey();\n                setCookie(\"k\", key, timeOut);\n                setCookie(\"t\", \"\", timeOut);\n                swal.close();\n            } else {\n                if (cootok !== \"\") {\n                    $.ajax({\n                        url: 'select.php?tipo=6',\n                        type: 'post',\n                        data: {\n                            t: cootok,\n                            k: cookey,\n                            phoneinfo: ''\n                        },\n                        dataType: 'json',\n                        success: function (data) {\n                            swal.close();\n                            switch (Number(data.p)){\n                                case -1:\n                                    location.href = \"desktop/cambio_pass.php\";\n                                    break;\n                                case 1:\n                                    location.href = \"desktop/\";\n                                    break;\n                            }\n                        }\n                    });\n                } else {\n                    swal.close();\n                }\n            }\n        },allowOutsideClick: () => !Swal.isLoading()\n    });\n};\n\nasync function getKey(){\n    const result = await $.ajax({\n        url: 'select.php?tipo=4',\n        success: function (data) {\n            key = data;\n        }\n    });\n    return key;\n}\n\nfunction resetPass(){\n    $.ajax({\n        type: 'post',\n        url: 'select.php?tipo=3',\n        data: {\n            email: document.getElementById('login').value\n        },\n        success: function (data) {\n            Swal.fire({\n                title: 'Hecho !',\n                text: \"Enviamos un correo elecr\u00f3nico, por favor sigue los pasos. Verifica Spam si acaso no esta en tu bandeja de entrada.\",\n                icon: 'success'\n            }).then((result) => {\n                location.href = \"login.php\";\n            });\n        }\n    });\n}\n\nfunction setCookie(name, value, daysToLive) {\n    var cookie = name + \"=\" + encodeURIComponent(value);\n    var caduca = new Date();\n    caduca.setDate(caduca.getDate() + daysToLive);\n    if(typeof daysToLive === \"number\") {\n        /* Sets the max-age attribute so that the cookie expires\n        after the specified number of days */\n        cookie += \";max-age=\" + (daysToLive*24*60*60) + \";domain=\" + domainStr + \";samesite=strict;expires=\" + caduca.toGMTString() + \";path=/\";\n        document.cookie = cookie;\n    }\n}\n\nfunction delete_cookie( name, path, domain ) {\n    if( getCookie( name ) ) {\n        document.cookie = name + \"=\" +\n            ((path) ? \";path=\"+path:\"\")+\n            ((domain)?\";domain=\"+domain:\"\") +\n            \";expires=Thu, 01 Jan 1970 00:00:01 GMT\";\n    }\n}\n\nfunction getCookie(name) {\n    // Split cookie string and get all individual name=value pairs in an array\n    var cookieArr = document.cookie.split(\";\");\n\n    // Loop through the array elements\n    for(var i = 0; i < cookieArr.length; i++) {\n        var cookiePair = cookieArr[i].split(\"=\");\n\n        /* Removing whitespace at the beginning of the cookie name\n        and compare it with the given string */\n        if(name == cookiePair[0].trim()) {\n            // Decode the cookie value and return\n            return decodeURIComponent(cookiePair[1]);\n        }\n    }\n\n    // Return null if not found\n    return null;\n}\n\nasync function login(){\n    const cookey = await getCookie(\"k\");\n    $.ajax({\n        type: 'post',\n        url: 'select.php?tipo=5',\n        data: {\n            email: document.getElementById('login').value,\n            pass: document.getElementById('password').value,\n            key: cookey,\n            phoneinfo: ''\n        },\n        dataType: \"json\",\n        success: function (data) {\n            switch (Number(data.p)) {\n                case -1:\n                    // cambio de pass\n                    setCookie(\"t\",data.t,timeOut);\n                    location.href = \"desktop/cambio_pass.php\";\n                    break;\n                case 0:\n                    // login incorrecto\n                    Swal.fire(\"Error\",\"Login y/o usuario incorrectos.\",\"error\");\n                    break;\n                case 1:\n                    //login\n                    delete_cookie(\"k\",\"/\",domainStr);\n                    delete_cookie(\"t\",\"/\",domainStr);\n                    setCookie(\"k\",cookey,timeOut);\n                    setCookie(\"t\",data.t,timeOut);\n                    location.href = \"desktop/\";\n                    break;\n                case 2:\n                    Swal.fire(\"Error\",\"Usuario ya tiene cuenta abierta en otro dispositivo.\",\"error\");\n                    break;\n            }\n        }\n    });\n}"],
"names":["timeOut","window","onload","window.onload","Swal","fire","title","didOpen","showLoading","navigator","cookieEnabled","document","getElementById","style","cookey","getCookie","cootok","key","getKey","setCookie","swal","close","$","ajax","url","type","data","t","k","phoneinfo","dataType","success","Number","p","location","href","allowOutsideClick","isLoading","resetPass","email","value","text","icon","then","result","name","daysToLive","cookie","encodeURIComponent","caduca","Date","setDate","getDate","domainStr","toGMTString","delete_cookie","path","domain","cookieArr","split","i","length","cookiePair","trim","decodeURIComponent","login","pass"]
}
