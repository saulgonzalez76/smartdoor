var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}return globalThis};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.polyfill=function(a,b,c,e){if(b){c=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var d=a[e];d in c||(c[d]={});c=c[d]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(a){return a instanceof d?a:new d(function(b,c){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(a)};var e=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){e(a,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var c=a[b];a[b]=null;try{c()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var d=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(k){b.reject(k)}};d.prototype.createResolveAndReject_=function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};d.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof d)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};d.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(k){this.reject_(k);return}"function"==typeof b?
this.settleSameAsThenable_(b,a):this.fulfill_(a)};d.prototype.reject_=function(a){this.settle_(2,a)};d.prototype.fulfill_=function(a){this.settle_(1,a)};d.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};d.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)f.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var f=new b;d.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};d.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(l){c.reject(l)}};d.prototype.then=function(a,b){function c(a,b){return"function"==typeof a?function(b){try{e(a(b))}catch(m){f(m)}}:b}var e,f,g=new d(function(a,b){e=a;f=b});this.callWhenSettled_(c(a,e),c(b,f));return g};
d.prototype.catch=function(a){return this.then(void 0,a)};d.prototype.callWhenSettled_=function(a,b){function c(){switch(d.state_){case 1:a(d.result_);break;case 2:b(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?f.asyncExecute(c):this.onSettledCallbacks_.push(c)};d.resolve=c;d.reject=function(a){return new d(function(b,c){c(a)})};d.race=function(a){return new d(function(b,d){for(var e=$jscomp.makeIterator(a),f=e.next();!f.done;f=e.next())c(f.value).callWhenSettled_(b,
d)})};d.all=function(a){var b=$jscomp.makeIterator(a),e=b.next();return e.done?c([]):new d(function(a,d){function f(b){return function(c){g[b]=c;h--;0==h&&a(g)}}var g=[],h=0;do g.push(void 0),h++,c(e.value).callWhenSettled_(f(g.length-1),d),e=b.next();while(!e.done)})};return d},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+b++,c)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var c=a.next();$jscomp.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(c.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var e=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(e);if(!e.done)return this.context_.stop_(),e;var d=e.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,d);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function c(b){return a.throw(b)}return new Promise(function(e,d){function f(a){a.done?e(a.value):Promise.resolve(a.value).then(b,c).then(f,d)}f(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.polyfill("globalThis",function(a){return a||$jscomp.global},"es_next","es3");
function validaUsuarioNuevo(a,b){res="";""===_("txtNombre").value&&(res="Falta el nombre completo del usuario.<br>");""===_("txtCorreo").value&&(res+="Falta el correo electronico del usuario.<br>");""===_("txtCorreo").value||validateEmail(_("txtCorreo").value)||(res+="El correo electronico no es valido.<br>");10>_("txtWhatsapp").value.length&&(res+="Falta el n\u00famero de whatsapp o celular del usuario.<br>");if(""!==res)return Swal.fire("Error!","Se encontraron algunos errores:<br><br>"+res+"<br>Favor de corregirlos antes de guardar.",
"error"),!1;_("btnagregausuario").disabled=!0;$.ajax({type:"post",url:"select.php?tipo=6",data:{email:_("txtCorreo").value},success:function(c){var e=0;0<Number(c)&&(e=c);$.ajax({type:"post",url:"usuario_nuevo.php",data:{email:_("txtCorreo").value,guardar:1,id:Base64.decode(a),idusuario:e,estacion:Base64.decode(b),nombre:_("txtNombre").value,whatsapp:_("cbopais").value+_("txtWhatsapp").value},success:function(a){console.log("data:"+a);""==a?swal.fire("Error","Ups, a ocurrido un error y no se guardo el usuario. Si el problema persiste por favor reportelo a ayuda@smartdoor.mx",
"error"):_("contenido").innerHTML=a}})}})}
function validaEmpleadoNuevo(a,b){res="";""===_("txtNombre").value&&(res="Falta el nombre completo del usuario.<br>");0===_("cboHorario").value&&(res+="Falta el horario para el empleado.<br>");if(""!==res)return Swal.fire("Error!","Se encontraron algunos errores:<br><br>"+res+"<br>Favor de corregirlos antes de guardar.","error"),!1;_("btnagregausuario").disabled=!0;$.ajax({type:"post",url:"empleado_nuevo.php",data:{guardar:1,id:Base64.decode(a),estacion:Base64.decode(b),nombre:_("txtNombre").value,
horario:_("cboHorario").value},success:function(a){_("contenido").innerHTML=a}})}
function abrepuerta(a,b){a=Base64.decode(a);b=Base64.decode(b);Swal.fire({title:"Quieres abrir "+b+" ?",showCancelButton:!0,confirmButtonText:"Abrir puerta !",cancelButtonColor:"#d33",cancelButtonText:"No, dejala cerrada."}).then(function(c){c.value&&$.ajax({url:"select.php?tipo=2&codigo="+a,success:function(c){c=JSON.parse(c);c=c.estatus;switch(Number(c)){case 0:$.ajax({url:"select.php?tipo=1&codigo="+a+"&pos="+posLatLng,success:function(a){var c=Number(a);isNaN(c)?swal.fire(b,a+" a hecho una apertura, debe esperar un momento para ejecutar de nuevo.",
"error"):Swal.fire({title:"Esperando a "+b,html:"Espere mientras recibimos confirmaci\u00f3n de la puerta, se cancela en: <b>30</b>",timer:3E4,timerProgressBar:!0,didOpen:function(){Swal.showLoading();var a=Swal.getHtmlContainer().querySelector("b");timerInterval=setInterval(function(){a.textContent=Math.round(Swal.getTimerLeft()/1E3)},100);$.ajax({url:"select.php?tipo=15&idregistro="+c,success:function(a){1===Number(a)?(swal.close(),swal.fire(b,"Hecho, se abrio la puerta !","success")):(swal.close(),
swal.fire(b,"No se a podido abrir la puerta, operaci\u00f3n cancelada !","error"));clearInterval(timerInterval)}})},allowOutsideClick:function(){return!Swal.isLoading()}})}});break;case 1:swal.fire(b,"La puerta se encuentra en movimiento, intenta en un minuto.","error");break;case 2:swal.fire(b,"La puerta se encuentra sin conexion WIFI.","error")}}})})}
function getPuertaStatus(){$("label[id^='lblstatus_']").each(function(){var a=$(this).attr("id");$.ajax({url:"select.php?tipo=2&codigo="+a.split("lblstatus_")[1],success:function(b){b=JSON.parse(b);if("ESP01"===b.hardware)switch(Number(b.estatus)){case 0:$("#"+a).removeClass("text-danger");$("#"+a).addClass("text-success");_(a).innerHTML="En espera";break;case 1:$("#"+a).removeClass("text-success");$("#"+a).addClass("text-danger");_(a).innerHTML="En movimiento";break;case 2:$("#"+a).removeClass("text-success"),
$("#"+a).addClass("text-danger"),_(a).innerHTML="ERROR: Sin conexion WIFI"}else if("ESP02"===b.hardware)switch(Number(b.estatus)){case 0:$("#"+a).removeClass("text-success");$("#"+a).addClass("text-danger");_(a).innerHTML="Inactivo";break;case 1:$("#"+a).removeClass("text-danger");$("#"+a).addClass("text-success");_(a).innerHTML="Activo";break;case 2:$("#"+a).removeClass("text-success"),$("#"+a).addClass("text-danger"),_(a).innerHTML="ERROR: Sin conexion WIFI"}var c="divsenal_"+a.split("lblstatus_")[1];
switch(Number(b.wifi)){case 0:_(c).innerHTML='<label class=" text-md text-danger"><i class="fas fa-skull-crossbones"></i></label>';break;case 1:_(c).innerHTML='<label class=" text-xs text-danger">'+b.dbi+' dBm&nbsp;&nbsp;&nbsp;</label><label class=" text-xs text-danger">)</label>';break;case 2:_(c).innerHTML='<label class=" text-xs text-danger">'+b.dbi+' dBm&nbsp;&nbsp;&nbsp;</label><label class=" text-xs text-warning">)</label><label class=" text-sm text-warning">)</label>';break;case 3:_(c).innerHTML=
'<label class=" text-xs text-danger">'+b.dbi+' dBm&nbsp;&nbsp;&nbsp;</label><label class=" text-xs text-success">)</label><label class=" text-sm text-success">)</label><label class=" text-md text-success">)</label>'}}})})}
function bloquearUsuario(a,b){$.ajax({url:"select.php?tipo=11",data:{bloqueado:b,codigo:a},type:"post",success:function(c){1===Number(c)?_("imgqr").src="../common_files/img/blocked.png":_("imgqr").src="../common_files/clases/img_qr.php?codigo="+a;_("txtbloqueado").value=1===Number(b)?0:1;1===Number(b)?($("#btnbloquear").removeClass("btn-danger"),$("#btnbloquear").addClass("btn-primary"),_("btnbloquear").innerHTML='Habilitar usuario <i class="fas fa-unlock-alt"></i>'):($("#btnbloquear").removeClass("btn-primary"),
$("#btnbloquear").addClass("btn-danger"),_("btnbloquear").innerHTML='Bloquear usuario <i class="fas fa-user-lock"></i>')}})}function eliminarUsuario(a,b,c){Swal.fire({title:"Quieres eliminar este usuario ?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonColor:"#d33",cancelButtonText:"No."}).then(function(e){e.value&&$.ajax({url:"select.php?tipo=16",data:{idestacion:b,codigo:a,idusuario:c},type:"post",success:function(a){menu_inicio()}})})}
function setAdminUsuario(a,b,c){$.ajax({url:"select.php?tipo=12",data:{admin:c,idestacion:a,usuario:b},type:"post",success:function(a){_("txtadmin").value=1===Number(c)?0:1;0===Number(c)?($("#btnadmin").removeClass("btn-danger"),$("#btnadmin").addClass("btn-primary"),_("btnadmin").innerHTML='Hacer administrador <i class="fas fa-user-cog"></i>'):($("#btnadmin").removeClass("btn-primary"),$("#btnadmin").addClass("btn-danger"),_("btnadmin").innerHTML='Quitar administrador <i class="fas fa-user-cog"></i>')}})}
function procesar_lista_nuevo_usuario(a){if(/^([a-zA-Z0-9\s_\\.\-:])+(.xls|.xlsx)$/.test(_("archnuevousuario").value.toLowerCase())){var b=_("archnuevousuario");if("undefined"!=typeof FileReader){var c=new FileReader;c.readAsBinaryString?(c.onload=function(b){ProcessExcel(b.target.result,a)},c.readAsBinaryString(b.files[0])):(c.onload=function(b){var c="";b=new Uint8Array(b.target.result);for(var e=0;e<b.byteLength;e++)c+=String.fromCharCode(b[e]);ProcessExcel(c,a)},c.readAsArrayBuffer(b.files[0]))}else Swal.fire("Error!",
"El navegador no soporta esta funcion.","error")}else Swal.fire("Error!","Archivo no reconocido, si el nombre del archivo contiene '\u00f1' por favor cambie el nombre del archivo. Debe subir un archivo .XLSX (Excel) con el listado de predios de avios.","error")}
function ProcessExcel(a,b){var c=XLSX.read(a,{type:"binary",skipHeader:!1});a=_("lstListaImportar");c=XLSX.utils.sheet_to_json(c.Sheets[c.SheetNames[0]]);for(var e=0;e<c.length;e++)if(b>=a.rows.length){var d=a.insertRow(a.getElementsByTagName("tr").length);d.insertCell(0);d.insertCell(1);d.insertCell(2);d.insertCell(3);for(var f in c[e])switch(f){case "NOMBRE":d.cells[0].innerHTML=c[e][f];break;case "CORREO":d.cells[1].innerHTML=c[e][f];break;case "TEL":d.cells[2].innerHTML=c[e][f]}d.cells[3].innerHTML=
""}b<c.length&&(_("lblerrorImporta").innerHTML=c.length-b+" Usuarios no importados por falta de espacio.");1<a.rows.length&&(_("btnagregausuariolista").disabled="")}
function creaUsuariosLista(a,b){var c,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){1==d.nextAddress&&(_("btnagregausuariolista").disabled=!0,c=_("lstListaImportar"),e={$jscomp$loop$prop$linea$5:1});if(3!=d.nextAddress){if(!(e.$jscomp$loop$prop$linea$5<c.rows.length))return d.jumpTo(0);c.rows[e.$jscomp$loop$prop$linea$5].cells[3].innerHTML='<i class="fa fa-spin fa-spinner"></i>';return d.yield($.ajax({type:"post",url:"select.php?tipo=6",data:{email:c.rows[e.$jscomp$loop$prop$linea$5].cells[1].innerText},
success:function(d){return function(e){var f=0;0<Number(e)&&(f=e);$.ajax({type:"post",url:"usuario_nuevo.php",data:{email:c.rows[d.$jscomp$loop$prop$linea$5].cells[1].innerText,guardar:1,id:Base64.decode(a),idusuario:f,estacion:Base64.decode(b),nombre:c.rows[d.$jscomp$loop$prop$linea$5].cells[0].innerText,whatsapp:"52"+c.rows[d.$jscomp$loop$prop$linea$5].cells[2].innerText},success:function(a){c.rows[d.$jscomp$loop$prop$linea$5].cells[3].innerHTML='<i class="fa fa-check"></i>'}})}}(e)}),3)}e={$jscomp$loop$prop$linea$5:e.$jscomp$loop$prop$linea$5};
e.$jscomp$loop$prop$linea$5++;return d.jumpTo(2)})}
function registroCasaNuevo(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.yield($.ajax({type:"post",url:"select.php?tipo=18",data:{email:_("txtemail").value,fecha:_("dtfechainicio").value+" "+_("dthorainicio").value,telefono:_("txttelefono").value,nombre:_("txtnombre").value,fecha_fin:_("dtfechafin").value+" "+_("dthorafin").value,idestacion:a},success:function(a){0<Number(a)?(swal.fire("Guardado","Hecho, se guardo el registro !","success"),menu_inicio()):swal.fire("Error",
"Ups, a ocurrido un error y no se guardo el registro. Por favor intenta mas tarde.","error")}}),0)})}
function selCalendarioDia(a){if(""===selCalendarioInicio){selCalendarioInicio=Base64.decode(a);_("dtfechainicio").value=selCalendarioInicio;console.log(selCalendarioInicio);var b=$("#"+selCalendarioInicio);b.removeClass("activo");b.addClass("selCalendarioFecha")}else if(b=(Date.parse(Base64.decode(a)+"T00:00:00Z")-Date.parse(selCalendarioInicio+"T00:00:00Z"))/24/60/60/1E3,0<b)for(selCalendarioFin=Base64.decode(a),_("dtfechafin").value=selCalendarioFin,console.log(b),a=$("#"+selCalendarioFin),a.removeClass("activo"),
a.addClass("selCalendarioFecha"),a=1;a<b;a++){console.log("#"+addDays(selCalendarioInicio,a+1));var c=$("#"+addDays(selCalendarioInicio,a+1));c.removeClass("activo");c.addClass("selCalendarioFechaRango")}}
function remCalendarioDia(a){if(selCalendarioInicio===a){a=(Date.parse(selCalendarioFin+"T00:00:00Z")-Date.parse(selCalendarioInicio+"T00:00:00Z"))/24/60/60/1E3;for(var b=0;b<a+1;b++){var c=$("#"+addDays(selCalendarioInicio,b+1));c.removeClass("selCalendarioFechaRango");c.removeClass("selCalendarioFecha");c.addClass("activo")}selCalendarioFin=selCalendarioInicio="";_("dtfechainicio").value=""}else{a=(Date.parse(selCalendarioFin+"T00:00:00Z")-Date.parse(selCalendarioInicio+"T00:00:00Z"))/24/60/60/
1E3;for(b=1;b<a+1;b++)c=$("#"+addDays(selCalendarioInicio,b+1)),c.removeClass("selCalendarioFechaRango"),c.removeClass("selCalendarioFecha"),c.addClass("activo");selCalendarioFin=""}_("dtfechafin").value=""}function addDays(a,b){a=new Date(a);a.setDate(a.getDate()+b);return moment(a).format("YYYY-MM-DD")}function verUbicacionEntrada(a){window.open("https://maps.google.com/?q="+a)}
function sigMesCasa(a,b,c){c&&""===selCalendarioInicio&&(selCalendarioInicio=Base64.decode(a),_("dtfechainicio").value=selCalendarioInicio);ajaxpage("select.php?tipo=17&fecha="+a+"&idestacion="+b+"&selec="+c,"divcalendario_"+b)};
