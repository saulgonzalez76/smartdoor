/*
 inputmask.numeric.extensions.min.js
 https://github.com/RobinHerbots/Inputmask
 Copyright (c) 2010 - 2019 Robin Herbots
 Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
 Version: 4.0.9
*/
(function(h){"function"===typeof define&&define.amd?define(["./inputmask"],h):"object"===typeof exports?module.exports=h(require("./inputmask")):h(window.Inputmask)})(function(h){function r(a,c){for(var d="",b=0;b<a.length;b++)d=h.prototype.definitions[a.charAt(b)]||c.definitions[a.charAt(b)]||c.optionalmarker.start===a.charAt(b)||c.optionalmarker.end===a.charAt(b)||c.quantifiermarker.start===a.charAt(b)||c.quantifiermarker.end===a.charAt(b)||c.groupmarker.start===a.charAt(b)||c.groupmarker.end===
a.charAt(b)||c.alternatormarker===a.charAt(b)?d+("\\"+a.charAt(b)):d+a.charAt(b);return d}var l=h.dependencyLib;h.extendAliases({numeric:{mask:function(a){0!==a.repeat&&isNaN(a.integerDigits)&&(a.integerDigits=a.repeat);a.repeat=0;a.groupSeparator===a.radixPoint&&a.digits&&"0"!==a.digits&&(a.groupSeparator="."===a.radixPoint?",":","===a.radixPoint?".":"");" "===a.groupSeparator&&(a.skipOptionalPartCharacter=void 0);a.autoGroup=a.autoGroup&&""!==a.groupSeparator;if(a.autoGroup&&("string"==typeof a.groupSize&&
isFinite(a.groupSize)&&(a.groupSize=parseInt(a.groupSize)),isFinite(a.integerDigits))){var c=Math.floor(a.integerDigits/a.groupSize),d=a.integerDigits%a.groupSize;a.integerDigits=parseInt(a.integerDigits)+(0===d?c-1:c);1>a.integerDigits&&(a.integerDigits="*")}1<a.placeholder.length&&(a.placeholder=a.placeholder.charAt(0));"radixFocus"===a.positionCaretOnClick&&""===a.placeholder&&!1===a.integerOptional&&(a.positionCaretOnClick="lvp");a.definitions[";"]=a.definitions["~"];a.definitions[";"].definitionSymbol=
"~";!0===a.numericInput&&(a.positionCaretOnClick="radixFocus"===a.positionCaretOnClick?"lvp":a.positionCaretOnClick,a.digitsOptional=!1,isNaN(a.digits)&&(a.digits=2),a.decimalProtect=!1);c="[+]"+r(a.prefix,a);c=!0===a.integerOptional?c+("~{1,"+a.integerDigits+"}"):c+("~{"+a.integerDigits+"}");if(void 0!==a.digits){d=a.decimalProtect?":":a.radixPoint;var b=a.digits.toString().split(",");if(isFinite(b[0])&&b[1]&&isFinite(b[1]))c+=d+";{"+a.digits+"}";else if(isNaN(a.digits)||0<parseInt(a.digits))c=a.digitsOptional?
c+("["+d+";{1,"+a.digits+"}]"):c+(d+";{"+a.digits+"}")}c+=r(a.suffix,a);a.greedy=!1;return c+"[-]"},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,enforceDigitsOnBlur:!1,radixPoint:".",positionCaretOnClick:"radixFocus",groupSize:3,groupSeparator:"",autoGroup:!1,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",integerOptional:!0,prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:null,max:null,step:1,insertMode:!0,autoUnmask:!1,unmaskAsNumber:!1,inputType:"text",inputmode:"numeric",
preValidation:function(a,c,d,b,f,h){if("-"===d||d===f.negationSymbol.front){if(!0!==f.allowMinus)return!1;f.isNegative=void 0===f.isNegative?!0:!f.isNegative;return""===a.join("")?!0:{caret:h.validPositions[c]?c:void 0,dopost:!0}}return!1===b&&d===f.radixPoint&&void 0!==f.digits&&(isNaN(f.digits)||0<parseInt(f.digits))&&(a=l.inArray(f.radixPoint,a),-1!==a&&void 0!==h.validPositions[a])?!0===f.numericInput?c===a:{caret:a+1}:!0},postValidation:function(a,c,d,b){var f=b.suffix.split(""),q=b.prefix.split("");
if(void 0===d.pos&&void 0!==d.caret&&!0!==d.dopost)return d;c=void 0!==d.caret?d.caret:d.pos;var g=a.slice();b.numericInput&&(c=g.length-c-1,g=g.reverse());var k=g[c];k===b.groupSeparator&&(c+=1,k=g[c]);if(c===g.length-b.suffix.length-1&&k===b.radixPoint)return d;void 0!==k&&k!==b.radixPoint&&k!==b.negationSymbol.front&&k!==b.negationSymbol.back&&(g[c]="?",0<b.prefix.length&&c>=(!1===b.isNegative?1:0)&&c<b.prefix.length-1+(!1===b.isNegative?1:0)?q[c-(!1===b.isNegative?1:0)]="?":0<b.suffix.length&&
c>=g.length-b.suffix.length-(!1===b.isNegative?1:0)&&(f[c-(g.length-b.suffix.length-(!1===b.isNegative?1:0))]="?"));q=q.join("");f=f.join("");var e=g.join("").replace(q,"");e=e.replace(f,"");e=e.replace(new RegExp(h.escapeRegex(b.groupSeparator),"g"),"");e=e.replace(new RegExp("[-"+h.escapeRegex(b.negationSymbol.front)+"]","g"),"");e=e.replace(new RegExp(h.escapeRegex(b.negationSymbol.back)+"$"),"");isNaN(b.placeholder)&&(e=e.replace(new RegExp(h.escapeRegex(b.placeholder),"g"),""));1<e.length&&1!==
e.indexOf(b.radixPoint)&&("0"===k&&(e=e.replace(/^\?/g,"")),e=e.replace(/^0/g,""));e.charAt(0)===b.radixPoint&&""!==b.radixPoint&&!0!==b.numericInput&&(e="0"+e);if(""!==e){e=e.split("");if((!b.digitsOptional||b.enforceDigitsOnBlur&&"blur"===d.event)&&isFinite(b.digits)){var m=l.inArray(b.radixPoint,e),p=l.inArray(b.radixPoint,g);-1===m&&(e.push(b.radixPoint),m=e.length-1);for(var n=1;n<=b.digits;n++)b.digitsOptional&&(!b.enforceDigitsOnBlur||"blur"!==d.event)||void 0!==e[m+n]&&e[m+n]!==b.placeholder.charAt(0)?
-1!==p&&void 0!==g[p+n]&&(e[m+n]=e[m+n]||g[p+n]):e[m+n]=d.placeholder||b.placeholder.charAt(0)}!0!==b.autoGroup||""===b.groupSeparator||k===b.radixPoint&&void 0===d.pos&&!d.dopost?e=e.join(""):(g=e[e.length-1]===b.radixPoint&&d.c===b.radixPoint,m="("+b.groupSeparator+"*{"+b.groupSize+"}){*}",""!==b.radixPoint&&(p=e.join("").split(b.radixPoint),p[1]&&(m+=b.radixPoint+"*{"+p[1].match(/^\d*\??\d*/)[0].length+"}")),e=h(m,{numericInput:!0,jitMasking:!0,definitions:{"*":{validator:"[0-9?]",cardinality:1}}}).format(e.join("")),
g&&(e+=b.radixPoint),e.charAt(0)===b.groupSeparator&&e.substr(1))}b.isNegative&&"blur"===d.event&&(b.isNegative="0"!==e);e=q+e+f;b.isNegative&&(e=b.negationSymbol.front+e,e+=b.negationSymbol.back);e=e.split("");if(void 0!==k)if(k!==b.radixPoint&&k!==b.negationSymbol.front&&k!==b.negationSymbol.back)c=l.inArray("?",e),-1<c?e[c]=k:c=d.caret||0;else if(k===b.radixPoint||k===b.negationSymbol.front||k===b.negationSymbol.back)f=l.inArray(k,e),-1!==f&&(c=f);b.numericInput&&(c=e.length-c-1,e=e.reverse());
a={caret:void 0!==k&&void 0===d.pos||void 0===c?c:c+(b.numericInput?-1:1),buffer:e,refreshFromBuffer:d.dopost||a.join("")!==e.join("")};return a.refreshFromBuffer?a:d},onBeforeWrite:function(a,c,d,b){if(a)switch(a.type){case "keydown":return b.postValidation(c,d,{caret:d,dopost:!0},b);case "blur":case "checkval":void 0===b.parseMinMaxOptions&&(null!==b.min&&(b.min=b.min.toString().replace(new RegExp(h.escapeRegex(b.groupSeparator),"g"),""),","===b.radixPoint&&(b.min=b.min.replace(b.radixPoint,".")),
b.min=isFinite(b.min)?parseFloat(b.min):NaN,isNaN(b.min)&&(b.min=Number.MIN_VALUE)),null!==b.max&&(b.max=b.max.toString().replace(new RegExp(h.escapeRegex(b.groupSeparator),"g"),""),","===b.radixPoint&&(b.max=b.max.replace(b.radixPoint,".")),b.max=isFinite(b.max)?parseFloat(b.max):NaN,isNaN(b.max)&&(b.max=Number.MAX_VALUE)),b.parseMinMaxOptions="done");if(null!==b.min||null!==b.max){a=b.onUnMask(c.join(""),void 0,l.extend({},b,{unmaskAsNumber:!0}));if(null!==b.min&&a<b.min)return b.isNegative=0>b.min,
b.postValidation(b.min.toString().replace(".",b.radixPoint).split(""),d,{caret:d,dopost:!0,placeholder:"0"},b);if(null!==b.max&&a>b.max)return b.isNegative=0>b.max,b.postValidation(b.max.toString().replace(".",b.radixPoint).split(""),d,{caret:d,dopost:!0,placeholder:"0"},b)}return b.postValidation(c,d,{caret:d,placeholder:"0",event:"blur"},b);case "_checkval":return{caret:d}}},regex:{integerPart:function(a,c){return c?new RegExp("["+h.escapeRegex(a.negationSymbol.front)+"+]?"):new RegExp("["+h.escapeRegex(a.negationSymbol.front)+
"+]?\\d+")},integerNPart:function(a){return new RegExp("[\\d"+h.escapeRegex(a.groupSeparator)+h.escapeRegex(a.placeholder.charAt(0))+"]+")}},definitions:{"~":{validator:function(a,c,d,b,f,l){if("k"===a||"m"===a){var g={insert:[],c:0};f=0;for(c="k"===a?2:5;f<c;f++)g.insert.push({pos:d+f,c:0});g.pos=d+c;return g}g=b?(new RegExp("[0-9"+h.escapeRegex(f.groupSeparator)+"]")).test(a):/[0-9]/.test(a);if(!0===g){if(!0!==f.numericInput&&void 0!==c.validPositions[d]&&"~"===c.validPositions[d].match.def&&!l){g=
c.buffer.join("");g=g.replace(new RegExp("[-"+h.escapeRegex(f.negationSymbol.front)+"]","g"),"");g=g.replace(new RegExp(h.escapeRegex(f.negationSymbol.back)+"$"),"");g=g.split(f.radixPoint);1<g.length&&(g[1]=g[1].replace(/0/g,f.placeholder.charAt(0)));"0"===g[0]&&(g[0]=g[0].replace(/0/g,f.placeholder.charAt(0)));g=g[0]+f.radixPoint+g[1]||"";c=c._buffer.join("");for(g===f.radixPoint&&(g=c);null===g.match(h.escapeRegex(c)+"$");)c=c.slice(1);g=g.replace(c,"");g=g.split("");g=void 0===g[d]?{pos:d,remove:d}:
{pos:d}}}else b||a!==f.radixPoint||void 0!==c.validPositions[d-1]||(g={insert:{pos:d,c:0},pos:d+1});return g},cardinality:1},"+":{validator:function(a,c,d,b,f){return f.allowMinus&&("-"===a||a===f.negationSymbol.front)},cardinality:1,placeholder:""},"-":{validator:function(a,c,d,b,f){return f.allowMinus&&a===f.negationSymbol.back},cardinality:1,placeholder:""},":":{validator:function(a,c,d,b,f){b="["+h.escapeRegex(f.radixPoint)+"]";(a=(new RegExp(b)).test(a))&&c.validPositions[d]&&c.validPositions[d].match.placeholder===
f.radixPoint&&(a={caret:d+1});return a},cardinality:1,placeholder:function(a){return a.radixPoint}}},onUnMask:function(a,c,d){if(""===c&&!0===d.nullable)return c;a=a.replace(d.prefix,"");a=a.replace(d.suffix,"");a=a.replace(new RegExp(h.escapeRegex(d.groupSeparator),"g"),"");""!==d.placeholder.charAt(0)&&(a=a.replace(new RegExp(d.placeholder.charAt(0),"g"),"0"));return d.unmaskAsNumber?(""!==d.radixPoint&&-1!==a.indexOf(d.radixPoint)&&(a=a.replace(h.escapeRegex.call(this,d.radixPoint),".")),a=a.replace(new RegExp("^"+
h.escapeRegex(d.negationSymbol.front)),"-"),a=a.replace(new RegExp(h.escapeRegex(d.negationSymbol.back)+"$"),""),Number(a)):a},isComplete:function(a,c){a=(c.numericInput?a.slice().reverse():a).join("");a=a.replace(new RegExp("^"+h.escapeRegex(c.negationSymbol.front)),"-");a=a.replace(new RegExp(h.escapeRegex(c.negationSymbol.back)+"$"),"");a=a.replace(c.prefix,"");a=a.replace(c.suffix,"");a=a.replace(new RegExp(h.escapeRegex(c.groupSeparator)+"([0-9]{3})","g"),"$1");","===c.radixPoint&&(a=a.replace(h.escapeRegex(c.radixPoint),
"."));return isFinite(a)},onBeforeMask:function(a,c){c.isNegative=void 0;var d=c.radixPoint||",";"number"!=typeof a&&"number"!==c.inputType||""===d||(a=a.toString().replace(".",d));a=a.split(d);var b=a[0].replace(/[^\-0-9]/g,""),f=1<a.length?a[1].replace(/[^0-9]/g,""):"";a=b+(""!==f?d+f:f);b=0;""!==d&&(b=f.length,""!==f&&(f=Math.pow(10,b||1),isFinite(c.digits)&&(b=parseInt(c.digits),f=Math.pow(10,b)),a=a.replace(h.escapeRegex(d),"."),isFinite(a)&&(a=Math.round(parseFloat(a)*f)/f),a=a.toString().replace(".",
d)));0===c.digits&&-1!==a.indexOf(h.escapeRegex(d))&&(a=a.substring(0,a.indexOf(h.escapeRegex(d))));d=a.toString().split("");if(0<b)for(a=l.inArray(c.radixPoint,d),-1===a&&(d.push(c.radixPoint),a=d.length-1),c=1;c<=b;c++)d[a+c]=d[a+c]||"0";return d.join("")},onKeyDown:function(a,c,d,b){c=l(this);if(a.ctrlKey)switch(a.keyCode){case h.keyCode.UP:c.val(parseFloat(this.inputmask.unmaskedvalue())+parseInt(b.step));c.trigger("setvalue");break;case h.keyCode.DOWN:c.val(parseFloat(this.inputmask.unmaskedvalue())-
parseInt(b.step)),c.trigger("setvalue")}}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:0,radixPoint:""},percentage:{alias:"numeric",digits:2,digitsOptional:!0,radixPoint:".",placeholder:"0",autoGroup:!1,min:0,max:100,suffix:" %",allowMinus:!1}});return h});
