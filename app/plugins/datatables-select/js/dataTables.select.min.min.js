/*
 Select for DataTables 1.3.1
 2015-2019 SpryMedia Ltd - datatables.net/license/mit
*/
(function(f){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(l){return f(l,window,document)}):"object"===typeof exports?module.exports=function(l,n){l||(l=window);n&&n.fn.dataTable||(n=require("datatables.net")(l,n).$);return f(n,l,l.document)}:f(jQuery,window,document)})(function(f,l,n,h){function z(a,b,c){var d=function(c,b){if(c>b){var d=b;b=c;c=d}var e=!1;return a.columns(":visible").indexes().filter(function(a){a===c&&(e=!0);return a===b?(e=!1,!0):e})};var e=
function(c,b){var d=a.rows({search:"applied"}).indexes();if(d.indexOf(c)>d.indexOf(b)){var e=b;b=c;c=e}var m=!1;return d.filter(function(a){a===c&&(m=!0);return a===b?(m=!1,!0):m})};a.cells({selected:!0}).any()||c?(d=d(c.column,b.column),c=e(c.row,b.row)):(d=d(0,b.column),c=e(0,b.row));c=a.cells(c,d).flatten();a.cells(b,{selected:!0}).any()?a.cells(c).deselect():a.cells(c).select()}function v(a){var b=a.settings()[0]._select.selector;f(a.table().container()).off("mousedown.dtSelect",b).off("mouseup.dtSelect",
b).off("click.dtSelect",b);f("body").off("click.dtSelect"+a.table().node().id.replace(/[^a-zA-Z0-9\-_]/g,"-"))}function B(a){var b=f(a.table().container()),c=a.settings()[0],d=c._select.selector,e;b.on("mousedown.dtSelect",d,function(c){if(c.shiftKey||c.metaKey||c.ctrlKey)b.css("-moz-user-select","none").one("selectstart.dtSelect",d,function(){return!1});l.getSelection&&(e=l.getSelection())}).on("mouseup.dtSelect",d,function(){b.css("-moz-user-select","")}).on("click.dtSelect",d,function(c){var b=
a.select.items();if(e){var d=l.getSelection();if((!d.anchorNode||f(d.anchorNode).closest("table")[0]===a.table().node())&&d!==e)return}d=a.settings()[0];var k=f.trim(a.settings()[0].oClasses.sWrapper).replace(/ +/g,".");if(f(c.target).closest("div."+k)[0]==a.table().container()&&(k=a.cell(f(c.target).closest("td, th")),k.any())){var g=f.Event("user-select.dt");p(a,g,[b,k,c]);g.isDefaultPrevented()||(g=k.index(),"row"===b?(b=g.row,w(c,a,d,"row",b)):"column"===b?(b=k.index().column,w(c,a,d,"column",
b)):"cell"===b&&(b=k.index(),w(c,a,d,"cell",b)),d._select_lastCell=g)}});f("body").on("click.dtSelect"+a.table().node().id.replace(/[^a-zA-Z0-9\-_]/g,"-"),function(b){c._select.blurable&&!f(b.target).parents().filter(a.table().container()).length&&0!==f(b.target).parents("html").length&&!f(b.target).parents("div.DTE").length&&t(c,!0)})}function p(a,b,c,d){if(!d||a.flatten().length)"string"===typeof b&&(b+=".dt"),c.unshift(a),f(a.table().node()).trigger(b,c)}function C(a){var b=a.settings()[0];if(b._select.info&&
b.aanFeatures.i&&"api"!==a.select.style()){var c=a.rows({selected:!0}).flatten().length,d=a.columns({selected:!0}).flatten().length,e=a.cells({selected:!0}).flatten().length,k=function(c,b,d){c.append(f('<span class="select-item"/>').append(a.i18n("select."+b+"s",{_:"%d "+b+"s selected",0:"",1:"1 "+b+" selected"},d)))};f.each(b.aanFeatures.i,function(b,a){a=f(a);b=f('<span class="select-info"/>');k(b,"row",c);k(b,"column",d);k(b,"cell",e);var m=a.children("span.select-info");m.length&&m.remove();
""!==b.text()&&a.append(b)})}}function D(a,b,c,d){var e=a[b+"s"]({search:"applied"}).indexes();d=f.inArray(d,e);var k=f.inArray(c,e);if(a[b+"s"]({selected:!0}).any()||-1!==d){if(d>k){var m=k;k=d;d=m}e.splice(k+1,e.length);e.splice(0,d)}else e.splice(f.inArray(c,e)+1,e.length);a[b](c,{selected:!0}).any()?(e.splice(f.inArray(c,e),1),a[b+"s"](e).deselect()):a[b+"s"](e).select()}function t(a,b){if(b||"single"===a._select.style)a=new g.Api(a),a.rows({selected:!0}).deselect(),a.columns({selected:!0}).deselect(),
a.cells({selected:!0}).deselect()}function w(a,b,c,d,e){var f=b.select.style(),m=b.select.toggleable(),g=b[d](e,{selected:!0}).any();if(!g||m)"os"===f?a.ctrlKey||a.metaKey?b[d](e).select(!g):a.shiftKey?"cell"===d?z(b,e,c._select_lastCell||null):D(b,d,e,c._select_lastCell?c._select_lastCell[d]:null):(a=b[d+"s"]({selected:!0}),g&&1===a.flatten().length?b[d](e).deselect():(a.deselect(),b[d](e).select())):"multi+shift"==f?a.shiftKey?"cell"===d?z(b,e,c._select_lastCell||null):D(b,d,e,c._select_lastCell?
c._select_lastCell[d]:null):b[d](e).select(!g):b[d](e).select(!g)}function u(a,b){return function(c){return c.i18n("buttons."+a,b)}}function x(a){a=a._eventNamespace;return"draw.dt.DT"+a+" select.dt.DT"+a+" deselect.dt.DT"+a}var g=f.fn.dataTable;g.select={};g.select.version="1.3.1";g.select.init=function(a){var b=a.settings()[0],c=b.oInit.select,d=g.defaults.select;c=c===h?d:c;d="row";var e="api",k=!1,m=!0,A=!0,l="td, th",p="selected",n=!1;b._select={};!0===c?(e="os",n=!0):"string"===typeof c?(e=
c,n=!0):f.isPlainObject(c)&&(c.blurable!==h&&(k=c.blurable),c.toggleable!==h&&(m=c.toggleable),c.info!==h&&(A=c.info),c.items!==h&&(d=c.items),e=c.style!==h?c.style:"os",n=!0,c.selector!==h&&(l=c.selector),c.className!==h)&&(p=c.className);a.select.selector(l);a.select.items(d);a.select.style(e);a.select.blurable(k);a.select.toggleable(m);a.select.info(A);b._select.className=p;f.fn.dataTable.ext.order["select-checkbox"]=function(c,b){return this.api().column(b,{order:"index"}).nodes().map(function(b){return"row"===
c._select.items?f(b).parent().hasClass(c._select.className):"cell"===c._select.items?f(b).hasClass(c._select.className):!1})};!n&&f(a.table().node()).hasClass("selectable")&&a.select.style("os")};f.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],function(a,b){g.ext.selector[b.type].push(function(c,a,e){a=a.selected;var d=[];if(!0!==a&&!1!==a)return e;for(var f=0,g=e.length;f<g;f++){var h=c[b.prop][e[f]];(!0===a&&!0===h._select_selected||!1===a&&!h._select_selected)&&d.push(e[f])}return d})});
g.ext.selector.cell.push(function(a,b,c){b=b.selected;var d=[];if(b===h)return c;for(var e=0,f=c.length;e<f;e++){var g=a.aoData[c[e].row];(!0===b&&g._selected_cells&&!0===g._selected_cells[c[e].column]||!(!1!==b||g._selected_cells&&g._selected_cells[c[e].column]))&&d.push(c[e])}return d});var q=g.Api.register,r=g.Api.registerPlural;q("select()",function(){return this.iterator("table",function(a){g.select.init(new g.Api(a))})});q("select.blurable()",function(a){return a===h?this.context[0]._select.blurable:
this.iterator("table",function(b){b._select.blurable=a})});q("select.toggleable()",function(a){return a===h?this.context[0]._select.toggleable:this.iterator("table",function(b){b._select.toggleable=a})});q("select.info()",function(a){return C===h?this.context[0]._select.info:this.iterator("table",function(b){b._select.info=a})});q("select.items()",function(a){return a===h?this.context[0]._select.items:this.iterator("table",function(b){b._select.items=a;p(new g.Api(b),"selectItems",[a])})});q("select.style()",
function(a){return a===h?this.context[0]._select.style:this.iterator("table",function(b){b._select.style=a;if(!b._select_init){var c=new g.Api(b);b.aoRowCreatedCallback.push({fn:function(c,a,d){a=b.aoData[d];a._select_selected&&f(c).addClass(b._select.className);c=0;for(d=b.aoColumns.length;c<d;c++)(b.aoColumns[c]._select_selected||a._selected_cells&&a._selected_cells[c])&&f(a.anCells[c]).addClass(b._select.className)},sName:"select-deferRender"});c.on("preXhr.dt.dtSelect",function(){var a=c.rows({selected:!0}).ids(!0).filter(function(c){return c!==
h}),b=c.cells({selected:!0}).eq(0).map(function(b){var a=c.row(b.row).id(!0);return a?{row:a,column:b.column}:h}).filter(function(c){return c!==h});c.one("draw.dt.dtSelect",function(){c.rows(a).select();b.any()&&b.each(function(b){c.cells(b.row,b.column).select()})})});c.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt info.dt",function(){C(c)});c.on("destroy.dtSelect",function(){v(c);c.off(".dtSelect")})}var d=new g.Api(b);v(d);"api"!==a&&B(d);p(new g.Api(b),"selectStyle",[a])})});q("select.selector()",
function(a){return a===h?this.context[0]._select.selector:this.iterator("table",function(b){v(new g.Api(b));b._select.selector=a;"api"!==b._select.style&&B(new g.Api(b))})});r("rows().select()","row().select()",function(a){var b=this;if(!1===a)return this.deselect();this.iterator("row",function(c,b){t(c);c.aoData[b]._select_selected=!0;f(c.aoData[b].nTr).addClass(c._select.className)});this.iterator("table",function(c,a){p(b,"select",["row",b[a]],!0)});return this});r("columns().select()","column().select()",
function(a){var b=this;if(!1===a)return this.deselect();this.iterator("column",function(c,b){t(c);c.aoColumns[b]._select_selected=!0;b=(new g.Api(c)).column(b);f(b.header()).addClass(c._select.className);f(b.footer()).addClass(c._select.className);b.nodes().to$().addClass(c._select.className)});this.iterator("table",function(c,a){p(b,"select",["column",b[a]],!0)});return this});r("cells().select()","cell().select()",function(a){var b=this;if(!1===a)return this.deselect();this.iterator("cell",function(b,
a,e){t(b);a=b.aoData[a];a._selected_cells===h&&(a._selected_cells=[]);a._selected_cells[e]=!0;a.anCells&&f(a.anCells[e]).addClass(b._select.className)});this.iterator("table",function(a,d){p(b,"select",["cell",b[d]],!0)});return this});r("rows().deselect()","row().deselect()",function(){var a=this;this.iterator("row",function(b,a){b.aoData[a]._select_selected=!1;f(b.aoData[a].nTr).removeClass(b._select.className)});this.iterator("table",function(b,c){p(a,"deselect",["row",a[c]],!0)});return this});
r("columns().deselect()","column().deselect()",function(){var a=this;this.iterator("column",function(b,a){b.aoColumns[a]._select_selected=!1;var c=new g.Api(b),e=c.column(a);f(e.header()).removeClass(b._select.className);f(e.footer()).removeClass(b._select.className);c.cells(null,a).indexes().each(function(a){var c=b.aoData[a.row],d=c._selected_cells;!c.anCells||d&&d[a.column]||f(c.anCells[a.column]).removeClass(b._select.className)})});this.iterator("table",function(b,c){p(a,"deselect",["column",
a[c]],!0)});return this});r("cells().deselect()","cell().deselect()",function(){var a=this;this.iterator("cell",function(a,c,d){c=a.aoData[c];c._selected_cells[d]=!1;c.anCells&&!a.aoColumns[d]._select_selected&&f(c.anCells[d]).removeClass(a._select.className)});this.iterator("table",function(b,c){p(a,"deselect",["cell",a[c]],!0)});return this});var y=0;f.extend(g.ext.buttons,{selected:{text:u("selected","Selected"),className:"buttons-selected",limitTo:["rows","columns","cells"],init:function(a,b,
c){var d=this;c._eventNamespace=".select"+y++;a.on(x(c),function(){d.enable(-1!==f.inArray("rows",c.limitTo)&&a.rows({selected:!0}).any()||-1!==f.inArray("columns",c.limitTo)&&a.columns({selected:!0}).any()||-1!==f.inArray("cells",c.limitTo)&&a.cells({selected:!0}).any()?!0:!1)});this.disable()},destroy:function(a,b,c){a.off(c._eventNamespace)}},selectedSingle:{text:u("selectedSingle","Selected single"),className:"buttons-selected-single",init:function(a,b,c){var d=this;c._eventNamespace=".select"+
y++;a.on(x(c),function(){var b=a.rows({selected:!0}).flatten().length+a.columns({selected:!0}).flatten().length+a.cells({selected:!0}).flatten().length;d.enable(1===b)});this.disable()},destroy:function(a,b,c){a.off(c._eventNamespace)}},selectAll:{text:u("selectAll","Select all"),className:"buttons-select-all",action:function(){this[this.select.items()+"s"]().select()}},selectNone:{text:u("selectNone","Deselect all"),className:"buttons-select-none",action:function(){t(this.settings()[0],!0)},init:function(a,
b,c){var d=this;c._eventNamespace=".select"+y++;a.on(x(c),function(){var b=a.rows({selected:!0}).flatten().length+a.columns({selected:!0}).flatten().length+a.cells({selected:!0}).flatten().length;d.enable(0<b)});this.disable()},destroy:function(a,b,c){a.off(c._eventNamespace)}}});f.each(["Row","Column","Cell"],function(a,b){var c=b.toLowerCase();g.ext.buttons["select"+b+"s"]={text:u("select"+b+"s","Select "+c+"s"),className:"buttons-select-"+c+"s",action:function(){this.select.items(c)},init:function(a){var b=
this;a.on("selectItems.dt.DT",function(a,d,e){b.active(e===c)})}}});f(n).on("preInit.dt.dtSelect",function(a,b){"dt"===a.namespace&&g.select.init(new g.Api(b))});return g.select});
